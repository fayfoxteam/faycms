var system={"user_id":0,"loadingScripts":{},"loadingCss":{},"url":function(router,params){if(router){if(typeof(params)=="undefined"){params={}}var url=this.base_url+router;var param_arr=[];$.each(params,function(i,e){param_arr.push(i+"="+encodeURIComponent(e))});if(param_arr.length){url+="?";url+=param_arr.join("&")}return url}else{return this.base_url}},"assets":function(uri){return this.base_url+"assets/"+uri},"date":function(timestamp){var date=new Date(parseInt(timestamp)*1000);var month=date.getMonth()+1;if(month<10){month="0"+month}var day=date.getDate();if(day<10){day="0"+day}var hour=date.getHours();if(hour<10){hour="0"+hour}var minute=date.getMinutes();if(minute<10){minute="0"+minute}var second=date.getSeconds();if(second<10){second="0"+second}return date.getFullYear()+"-"+month+"-"+day+" "+hour+":"+minute+":"+second},"shortDate":function(timestamp){var now=new Date();var now_timestamp=parseInt(now.getTime()/1000);var dv=now_timestamp-timestamp;var date=new Date(parseInt(timestamp)*1000);var today=new Date();today.setHours(0);today.setMinutes(0);today.setSeconds(0);var today_timestamp=parseInt(today.getTime()/1000);if(dv<3){return"刚刚"}else{if(dv<60){return dv+"秒前"}else{if(dv<3600){return Math.floor(dv/60)+"分钟前"}else{if(date.getDate()==now.getDate()){return Math.floor(dv/3600)+"小时前"}else{if(dv<((now_timestamp-today_timestamp)+6*86400)){return Math.ceil((dv-(now_timestamp-today_timestamp))/86400)+"天前"}else{if(date.getFullYear()==now.getFullYear()){return date.getMonth()+"月"+date.getDate()+"日"}else{return date.getFullYear().toString().substring(2)+"年"+date.getMonth()+"月"+date.getDate()+"日"}}}}}}},"encode":function(str){var s="";if(str==undefined||str.length==0){return""}s=str.replace(/&/g,"&amp;");s=s.replace(/</g,"&lt;");s=s.replace(/>/g,"&gt;");s=s.replace(/ /g,"&nbsp;");s=s.replace(/\'/g,"&#39;");s=s.replace(/\"/g,"&quot;");s=s.replace(/\n/g,"<br>");return s},"changeTwoDecimal":function(x){var f_x=parseFloat(x);if(isNaN(f_x)){return false}var f_x=Math.round(x*100)/100;var s_x=f_x.toString();var pos_decimal=s_x.indexOf(".");if(pos_decimal<0){pos_decimal=s_x.length;s_x+="."}while(s_x.length<=pos_decimal+2){s_x+="0"}return s_x},"inArray":function(needle,haystack,argStrict){var key="",strict=!!argStrict;if(strict){for(key in haystack){if(haystack[key]===needle){return true}}}else{for(key in haystack){if(haystack[key]==needle){return true}}}return false},"arrayUnique":function(arr){var key="",tmp_arr2={},val="";var __array_search=function(needle,haystack){var fkey="";for(fkey in haystack){if(haystack.hasOwnProperty(fkey)){if((haystack[fkey]+"")===(needle+"")){return fkey}}}return false};for(key in inputArr){if(inputArr.hasOwnProperty(key)){val=inputArr[key];if(false===__array_search(val,tmp_arr2)){tmp_arr2[key]=val}}}return tmp_arr2},"log":function(input){if(!($.browser.msie&&$.browser.version<9)){console.log(input)}},"getScript":function(url,callback){if(typeof(system.loadingScripts[url])=="undefined"&&!$("script[src='"+url+"']").length){system.loadingScripts[url]=[callback];$.ajax({type:"GET",url:url,dataType:"script",cache:true,success:function(){$.each(system.loadingScripts[url],function(i,func){if(typeof(func)=="function"){func()}});system.loadingScripts[url]=[]}})}else{if(system.loadingScripts[url]&&system.loadingScripts[url].length){system.loadingScripts[url].push(callback)}else{if(typeof(callback)=="function"){callback()}}}},"getCss":function(url,callback){if(typeof(system.loadingCss[url])=="undefined"&&!$("link[href='"+url+"']").length){system.loadingCss[url]=[callback];$("<link>").attr({"rel":"stylesheet","type":"text/css","href":url}).load(function(){$.each(system.loadingCss[url],function(i,func){if(typeof(func)=="function"){func()}});system.loadingCss[url]=[]}).appendTo("head")}else{if(system.loadingCss[url]&&system.loadingCss[url].length){system.loadingCss[url].push(callback)}else{if(typeof(callback)=="function"){callback()}}}}};