var system={user_id:0,base_url:null,assets_url:null,loadingScripts:{},loadingCss:{},url:function(a,d){if(a){if(typeof(d)=="undefined"){d={}}var b=this.base_url+a;var c=[];$.each(d,function(f,g){c.push(f+"="+encodeURIComponent(g))});if(c.length){b+="?";b+=c.join("&")}return b}else{return this.base_url}},assets:function(a){this.assets_url=this.assets_url||this.base_url+"assets/";return this.assets_url+a},date:function(f,e){if(f==0){return""}var d=new Date(parseInt(f)*1000);var g=d.getMonth()+1;if(g<10){g="0"+g}var b=d.getDate();if(b<10){b="0"+b}if(e){return d.getFullYear()+"-"+g+"-"+b}var a=d.getHours();if(a<10){a="0"+a}var h=d.getMinutes();if(h<10){h="0"+h}var c=d.getSeconds();if(c<10){c="0"+c}return d.getFullYear()+"-"+g+"-"+b+" "+a+":"+h+":"+c},shortDate:function(g){var d=new Date();var f=parseInt(d.getTime()/1000);var e=f-g;var c=new Date(parseInt(g)*1000);var b=new Date();b.setHours(0);b.setMinutes(0);b.setSeconds(0);var a=parseInt(b.getTime()/1000);if(e<3){return"刚刚"}else{if(e<60){return e+"秒前"}else{if(e<3600){return Math.floor(e/60)+"分钟前"}else{if(e<86400&&c.getDate()==d.getDate()){return Math.floor(e/3600)+"小时前"}else{if(e<((f-a)+6*86400)){return Math.ceil((e-(f-a))/86400)+"天前"}else{if(c.getFullYear()==d.getFullYear()){var h=c.getMonth()+1;return h+"月"+c.getDate()+"日"}else{var h=c.getMonth()+1;return c.getFullYear().toString().substring(2)+"年"+h+"月"+c.getDate()+"日"}}}}}}},encode:function(b){var a="";if(b==undefined||b.length==0){return""}a=b.replace(/&/g,"&amp;");a=a.replace(/</g,"&lt;");a=a.replace(/>/g,"&gt;");a=a.replace(/ /g,"&nbsp;");a=a.replace(/\'/g,"&#39;");a=a.replace(/\"/g,"&quot;");a=a.replace(/\n/g,"<br>");return a},changeTwoDecimal:function(a){var b=parseFloat(a);if(isNaN(b)){return false}var b=Math.round(a*100)/100;var c=b.toString();var d=c.indexOf(".");if(d<0){d=c.length;c+="."}while(c.length<=d+2){c+="0"}return c},inArray:function(e,d,c){var b="",a=!!c;if(a){for(b in d){if(d[b]===e){return true}}}else{for(b in d){if(d[b]==e){return true}}}return false},arrayUnique:function(c){var d="",b={},e="";var a=function(h,g){var f="";for(f in g){if(g.hasOwnProperty(f)){if((g[f]+"")===(h+"")){return f}}}return false};for(d in inputArr){if(inputArr.hasOwnProperty(d)){e=inputArr[d];if(false===a(e,b)){b[d]=e}}}return b},log:function(a){if(!($.browser.msie&&$.browser.version<9)){console.log(a)}},getScript:function(a,b){if(typeof(system.loadingScripts[a])=="undefined"&&!$("script[src='"+a+"']").length){system.loadingScripts[a]=[b];$.ajax({type:"GET",url:a,dataType:"script",cache:true,success:function(){$.each(system.loadingScripts[a],function(c,d){if(typeof(d)=="function"){d()}});system.loadingScripts[a]=[]}})}else{if(system.loadingScripts[a]&&system.loadingScripts[a].length){system.loadingScripts[a].push(b)}else{if(typeof(b)=="function"){b()}}}},getCss:function(a,b){if(typeof(system.loadingCss[a])=="undefined"&&!$("link[href='"+a+"']").length){system.loadingCss[a]=[b];$("<link>").attr({rel:"stylesheet",type:"text/css",href:a}).load(function(){$.each(system.loadingCss[a],function(c,d){if(typeof(d)=="function"){d()}});system.loadingCss[a]=[]}).appendTo("head")}else{if(system.loadingCss[a]&&system.loadingCss[a].length){system.loadingCss[a].push(b)}else{if(typeof(b)=="function"){b()}}}}};